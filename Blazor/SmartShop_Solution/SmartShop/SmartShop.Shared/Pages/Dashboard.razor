@page "/"
@using SmartShop.Shared.Services
@inject IFormFactor FormFactor
@inject NavigationManager Navigation

<PageTitle>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø§Ù„Ø¨Ù‚Ø§Ù„Ø© Ø§Ù„Ø°ÙƒÙŠØ©</PageTitle>

<div class="page-content">
    <!-- Stats Grid -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">
                <i data-lucide="package"></i>
            </div>
            <div class="stat-content">
                <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>
                <div class="stat-value">@totalProducts</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">
                <i data-lucide="wallet"></i>
            </div>
            <div class="stat-content">
                <div class="stat-label">Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</div>
                <div class="stat-value">
                    <div class="primary-value">
                        <span>@inventoryValueYER.ToString("N0")</span>
                        <span class="currency">Ø±.ÙŠ</span>
                    </div>
                    <div class="secondary-value">
                        <span>â‰ˆ @((inventoryValueYER / exchangeRate).ToString("N0"))</span>
                        <span class="currency">Ø±.Ø³</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="stat-card shortage-card" @onclick="NavigateToShortage">
            <div class="stat-icon">
                <i data-lucide="alert-triangle"></i>
            </div>
            <div class="stat-content">
                <div class="stat-label">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù†Ø§Ù‚ØµØ©</div>
                <div class="stat-value">@shortageCount</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">
                <i data-lucide="trending-up"></i>
            </div>
            <div class="stat-content">
                <div class="stat-label">Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠ</div>
                <div class="stat-value">
                    <div class="primary-value">
                        <span>@dailyProfitYER.ToString("N0")</span>
                        <span class="currency">Ø±.ÙŠ</span>
                    </div>
                    <div class="secondary-value">
                        <span>â‰ˆ @((dailyProfitYER / exchangeRate).ToString("N0"))</span>
                        <span class="currency">Ø±.Ø³</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Grid -->
    <div class="main-grid">
        <!-- Exchange Rate Card -->
        <div class="card exchange-rate-card">
            <div class="card-header">
                <h2 class="card-title">
                    <i data-lucide="dollar-sign"></i>
                    <span>Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù Ø§Ù„Ø­Ø§Ù„ÙŠ</span>
                </h2>
            </div>
            <div class="card-content">
                <div class="exchange-rate-display">
                    <div class="rate-value">
                        <span>@exchangeRate.ToString("N0")</span>
                        <span class="currency">Ø±.ÙŠ</span>
                    </div>
                    <div class="rate-description">
                        Ø³Ø¹Ø± Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ø§Ù„ÙˆØ§Ø­Ø¯ Ø¨Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„ÙŠÙ…Ù†ÙŠ
                    </div>
                    <div class="rate-examples">
                        <div class="rate-example">
                            <div class="example-label">10 Ø±.Ø³</div>
                            <div class="example-value">@((10 * exchangeRate).ToString("N0"))</div>
                        </div>
                        <div class="rate-example">
                            <div class="example-label">50 Ø±.Ø³</div>
                            <div class="example-value">@((50 * exchangeRate).ToString("N0"))</div>
                        </div>
                        <div class="rate-example">
                            <div class="example-label">100 Ø±.Ø³</div>
                            <div class="example-value">@((100 * exchangeRate).ToString("N0"))</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Updates Card -->
        <div class="card recent-updates-card">
            <div class="card-header">
                <h2 class="card-title">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</h2>
            </div>
            <div class="card-content">
                <div class="updates-list">
                    @foreach (var update in recentUpdates)
                    {
                        <div class="update-item">
                            <div class="update-info">
                                <div class="product-name">@update.ProductName</div>
                                <div class="update-date">@update.Date.ToString("yyyy-MM-dd")</div>
                            </div>
                            <div class="update-price">
                                <div class="new-price">@update.NewPrice.ToString("N0") Ø±.ÙŠ</div>
                                <div class="price-change @(update.Change > 0 ? "positive" : "negative")">
                                    @(update.Change > 0 ? "+" : "")@update.Change.ToString("N0") Ø±.ÙŠ
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>

    <!-- Coming Soon Section -->
    <div class="card coming-soon-card">
        <div class="card-header">
            <h2 class="card-title">
                <span>Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ - Ù…ÙŠØ²Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©</span>
                <span class="badge">Ù‚Ø±ÙŠØ¨Ø§Ù‹</span>
            </h2>
            <p class="card-description">Ù…ÙŠØ²Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© ÙˆÙ…ØªØ·ÙˆØ±Ø© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø£ÙØ¶Ù„ Ù„Ù…ØªØ¬Ø±Ùƒ</p>
        </div>
        <div class="card-content">
            <div class="coming-soon-grid">
                @foreach (var feature in comingSoonFeatures)
                {
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i data-lucide="@feature.Icon"></i>
                        </div>
                        <div class="feature-content">
                            <h3>@feature.Title</h3>
                            <p>@feature.Subtitle</p>
                            <small>@feature.Description</small>
                        </div>
                    </div>
                }
            </div>
            <div class="coming-soon-notice">
                ğŸš€ Ø³ØªÙƒÙˆÙ† Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ù…ØªØ§Ø­Ø© ÙÙŠ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…
            </div>
        </div>
    </div>
</div>

@code {
    private int totalProducts = 20;
    private decimal inventoryValueYER = 2450000;
    private int shortageCount = 4;
    private decimal dailyProfitYER = 125000;
    private decimal exchangeRate = 680;

    private List<PriceUpdate> recentUpdates = new();
    private List<ComingSoonFeature> comingSoonFeatures = new();

    protected override void OnInitialized()
    {
        LoadRecentUpdates();
        LoadComingSoonFeatures();
    }

    private void LoadRecentUpdates()
    {
        recentUpdates = new List<PriceUpdate>
        {
            new PriceUpdate { ProductName = "Ø³ÙƒØ± Ø£Ø¨ÙŠØ¶", Date = DateTime.Now.AddDays(-1), NewPrice = 6280, Change = 500 },
            new PriceUpdate { ProductName = "Ø£Ø±Ø² Ø¨Ø³Ù…ØªÙŠ", Date = DateTime.Now.AddDays(-2), NewPrice = 8960, Change = 800 },
            new PriceUpdate { ProductName = "Ø²ÙŠØª Ø¯ÙˆØ§Ø± Ø§Ù„Ø´Ù…Ø³", Date = DateTime.Now.AddDays(-3), NewPrice = 11540, Change = 1000 }
        };
    }

    private void LoadComingSoonFeatures()
    {
        comingSoonFeatures = new List<ComingSoonFeature>
        {
            new ComingSoonFeature 
            { 
                Icon = "database", 
                Title = "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©", 
                Subtitle = "ØªØªØ¨Ø¹ Ø¯Ù‚ÙŠÙ‚ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†", 
                Description = "Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø°ÙƒÙŠØ© ÙˆØªØ­Ù„ÙŠÙ„Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©" 
            },
            new ComingSoonFeature 
            { 
                Icon = "bar-chart-3", 
                Title = "ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØªØ­Ù„ÙŠÙ„Ø§Øª", 
                Subtitle = "ØªÙ‚Ø§Ø±ÙŠØ± Ø´Ø§Ù…Ù„Ø©", 
                Description = "Ø±Ø³ÙˆÙ… Ø¨ÙŠØ§Ù†ÙŠØ© ÙˆØ¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ÙØµÙ„Ø©" 
            },
            new ComingSoonFeature 
            { 
                Icon = "users", 
                Title = "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡", 
                Subtitle = "Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡", 
                Description = "Ù†Ù‚Ø§Ø· Ø§Ù„ÙˆÙ„Ø§Ø¡ ÙˆØ§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø§Ù„Ø¢Ø¬Ù„Ø©" 
            },
            new ComingSoonFeature 
            { 
                Icon = "file-text", 
                Title = "Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©", 
                Subtitle = "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª", 
                Description = "Ø±ÙˆØ§ØªØ¨ØŒ Ø¥ÙŠØ¬Ø§Ø±Ø§ØªØŒ ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø®Ø¯Ù…Ø§Øª" 
            }
        };
    }

    private void NavigateToShortage()
    {
        Navigation.NavigateTo("/shortage");
    }

    public class PriceUpdate
    {
        public string ProductName { get; set; } = string.Empty;
        public DateTime Date { get; set; }
        public decimal NewPrice { get; set; }
        public decimal Change { get; set; }
    }

    public class ComingSoonFeature
    {
        public string Icon { get; set; } = string.Empty;
        public string Title { get; set; } = string.Empty;
        public string Subtitle { get; set; } = string.Empty;
        public string Description { get; set; } = string.Empty;
    }
}